# 🚀 运行模式说明

> 📋 **文档导航**: [返回文档索引](README.md) | [使用文档](使用文档.md)

## 三种运行模式

| 模式 | 命令 | 自动监测 | 说明 |
|------|------|---------|------|
| **单次运行** | `python main.py` | ❌ | 处理当前未读邮件后结束 |
| **持续监控** | `python main_continuous.py` | ✅ | 每60秒自动检查，持续运行 |
| **API服务** | `python deploy_api.py` | ❌ | 启动Web服务，等待手动触发 |

---

## 1. 单次运行模式

```bash
python main.py
```

**工作方式：**
- 连接QQ邮箱 → 获取未读邮件 → 处理完成 → 程序结束

**适用场景：**
- 手动触发处理
- 配合定时任务使用

---

## 2. 持续监控模式 ⭐ 推荐

```bash
python main_continuous.py
```

**工作方式：**
- 每60秒自动检查一次邮箱
- 发现新邮件立即处理
- 持续运行直到按 `Ctrl+C` 停止

**适用场景：**
- 7x24小时自动化客服
- 需要快速响应的场景

**自定义检查间隔：**
编辑 `main_continuous.py` 第39行：
```python
CHECK_INTERVAL = 60  # 改成你想要的秒数（如 300 = 5分钟）
```

---

## 3. API服务模式

```bash
python deploy_api.py
```

**工作方式：**
- 启动API服务器（端口8000）
- **不会主动检查邮箱**
- 等待你手动触发

**访问方式：**
- Web界面：`http://localhost:8000/playground`
- API文档：`http://localhost:8000/docs`

**适用场景：**
- 需要Web界面控制
- 集成到其他系统
- 按需处理邮件

---

## 📧 邮件检测规则

所有模式都遵循：
- ✅ 检测**未读邮件**（最近8小时内）
- ✅ **处理完成后自动标记为已读**（避免重复处理）
- ❌ 跳过自己发送的邮件
- ❌ 跳过空邮件

---

## 💡 使用建议

| 需求 | 推荐模式 |
|------|---------|
| 偶尔处理邮件 | 单次运行 |
| 企业客服，快速响应 | **持续监控** ⭐ |
| 集成到现有系统 | API服务 |
| 定时批量处理 | 单次运行 + 系统定时任务 |

---

## ⚠️ 重要说明

**`deploy_api.py` 不会自动监测邮箱！**

运行后只是启动了一个Web服务，需要你手动访问 `http://localhost:8000/playground` 点击执行，或通过代码调用API才会检查邮箱。

如果需要自动监测，请使用 `main_continuous.py`！

