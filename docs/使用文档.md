# 📧 邮件自动化系统 - 使用文档

> 📋 **文档导航**: [返回文档索引](README.md) | [详细技术文档](说明文档.md)

## 🚀 快速开始

### 1. 安装依赖

```bash
# 后端依赖
pip install -r requirements.txt

# 前端依赖
cd frontend
npm install
```

### 2. 配置环境

在项目根目录创建 `.env` 文件：

```env
MY_EMAIL=你的QQ邮箱@qq.com
QQ_EMAIL_AUTH_CODE=你的QQ邮箱授权码
SILICONFLOW_API_KEY=你的硅基流动API密钥
```

**获取授权码**：QQ邮箱 → 设置 → 账户 → 开启IMAP/SMTP服务 → 生成授权码

**获取API密钥**：访问 [硅基流动](https://siliconflow.cn/) → 注册登录 → 创建API密钥

### 3. 初始化数据库

```bash
python scripts/database/create_index.py
```

### 4. 启动系统

**方式一：一键启动（Windows）**
```bash
scripts\start_all.bat
```

**方式二：手动启动**
```bash
# 终端1 - 启动后端
python backend_api.py

# 终端2 - 启动前端
cd frontend
npm run dev
```

### 5. 访问系统

- 🌐 **前端界面**: http://localhost:3000
- 📡 **后端API**: http://localhost:8000
- 📚 **API文档**: http://localhost:8000/docs

**默认账号**: `admin` / `admin123`

---

## 📋 运行模式

| 模式 | 命令 | 说明 |
|------|------|------|
| **Web界面** | `python backend_api.py` + 前端 | 完整的Web管理界面，推荐使用 |
| **单次运行** | `python main.py` | 处理当前未读邮件后结束 |
| **持续监控** | `python main_continuous.py` | 每15分钟自动检查邮箱 |

---

## 🎯 主要功能

### 邮件管理
- 📥 自动接收邮件
- 🤖 AI智能分类（产品咨询/投诉/反馈/无关）
- ✍️ 自动生成回复
- ✅ 质量校验
- 📤 一键发送

### 知识库管理
- 📚 上传文档构建知识库
- 🔍 智能检索相关信息
- 📊 查看检索统计

### 历史记录
- 📜 查看处理历史
- 📥 导出Excel报表
- 🔍 搜索和筛选

---

## ⚙️ 常用操作

### 添加知识库文档
1. 进入"知识库"页面
2. 点击"上传文档"
3. 选择 `.txt` 文件上传
4. 等待索引构建完成

### 处理邮件
1. 系统自动检测新邮件
2. AI自动分类和生成回复
3. 在"邮件"页面查看生成的回复
4. 确认无误后点击"发送"

### 导出数据
1. 进入"历史记录"页面
2. 选择时间范围
3. 点击"导出Excel"
4. 下载生成的报表文件

---

## ⚠️ 常见问题

**Q: 连接邮箱失败？**  
A: 检查授权码是否正确，确保已开启IMAP/SMTP服务

**Q: API调用失败？**  
A: 检查API密钥是否正确，确认账户有足够额度

**Q: 向量数据库错误？**  
A: 删除 `db` 文件夹，重新运行 `python create_index.py`

**Q: 前端无法连接后端？**  
A: 确认后端已启动（端口8000），检查CORS配置

---

## 📞 获取帮助

- 📖 **详细配置**：查看 [配置说明.md](配置说明.md)
- 🔧 **技术文档**：查看 [说明文档.md](说明文档.md)
- 🚀 **快速配置**：查看 [快速开始.md](快速开始.md)
- 📋 **文档索引**：查看 [README.md](README.md)
- 🐛 **问题反馈**：提交 GitHub Issue

